# Плагин "Выравнивание вариантов компонента"

Простой плагин для Figma, который автоматически выравнивает варианты компонента с настраиваемыми параметрами.

## Функциональность

Плагин берет выбранный набор компонентов (Component Set) и применяет к нему следующие настройки:
- **Настраиваемый паддинг**: от 0 до 200px (по умолчанию 40px)
- **Настраиваемый отступ между вариантами**: от 0 до 200px (по умолчанию 20px)
- **Количество колонок**: от 1 до 10 (по умолчанию 2)
- **Группировка по свойствам**: автоматическая группировка вариантов по выбранному свойству
- **Выравнивание**: Grid layout с равномерным распределением в сетке или по группам

## Как использовать

1. Откройте файл в Figma
2. Выберите набор компонентов (Component Set) или отдельный компонент внутри набора
3. Запустите плагин через меню "Plugins"
4. Настройте параметры: паддинг, отступ и количество колонок
5. **Выберите свойство для группировки** (опционально):
   - Нажмите "Обновить" для получения доступных свойств
   - Выберите свойство из списка (например: "Size", "State", "Type")
   - Или оставьте "Без группировки" для обычной сетки
6. Нажмите кнопку "Выровнять"

### Примеры группировки:
- **Size**: все "Small" в первой колонке, "Medium" во второй, "Large" в третьей
- **State**: все "Default" в первой колонке, "Hover" во второй, "Disabled" в третьей
- **Type**: все "Primary" в первой колонке, "Secondary" во второй

## Возможности

### ✓ Редактируемые параметры
- Поля ввода для паддинга и отступа (0-200px)
- Настройка количества колонок (1-10)
- Значения по умолчанию: паддинг 40px, отступ 20px, 2 колонки

### ✓ Группировка по свойствам
- Автоматическое определение доступных свойств вариантов (Size, State, Type и др.)
- Группировка компонентов по выбранному свойству в отдельные колонки
- Каждая колонка содержит варианты с одинаковым значением свойства
- Автоматическое определение количества колонок по количеству уникальных значений

### ✓ Grid Layout система
- Автоматическое позиционирование компонентов в сетке
- Равномерное распределение по колонкам и строкам (обычный режим)
- Вертикальное выравнивание в колонках (режим группировки)
- Автоматический расчет размеров на основе самого большого компонента

### ✓ Адаптивный размер
- Автоматический расчет размера Component Set
- Учет паддинга и отступов между компонентами
- Оптимальное соотношение ширины и высоты

### ✓ Улучшенный интерфейс
- Современный дизайн в стиле Figma
- Понятные элементы управления
- Список применяемых функций

## Технические детали

Плагин использует Grid layout для позиционирования вариантов:

### Grid система:
- `layoutMode`: 'NONE' - отключение Auto Layout
- **Позиционирование**: компоненты размещаются по координатам
- **Размеры ячеек**: определяются размерами самого большого компонента
- **Размер контейнера**: автоматически рассчитывается на основе содержимого

### Режим обычной сетки:
- **Колонка**: `index % columns`
- **Строка**: `Math.floor(index / columns)`
- **Позиция X**: `padding + col * (maxWidth + spacing)`
- **Позиция Y**: `padding + row * (maxHeight + spacing)`

### Режим группировки по свойствам:
- **Анализ свойств**: `variant.variantProperties` для получения всех доступных свойств
- **Группировка**: компоненты с одинаковым значением свойства попадают в одну группу
- **Позиционирование**: 
  - `x = padding + groupIndex * (maxWidth + spacing)` (колонка = группа)
  - `y = padding + itemIndex * (maxHeight + spacing)` (строка = позиция в группе)
- **Количество колонок**: автоматически определяется по количеству уникальных значений

### Алгоритм группировки:
```javascript
// Группировка вариантов
const groups = {};
variants.forEach(variant => {
  const value = variant.variantProperties[property];
  if (!groups[value]) groups[value] = [];
  groups[value].push(variant);
});

// Позиционирование по группам
Object.keys(groups).forEach((groupKey, groupIndex) => {
  groups[groupKey].forEach((variant, itemIndex) => {
    variant.x = padding + groupIndex * (maxWidth + spacing);
    variant.y = padding + itemIndex * (maxHeight + spacing);
  });
});
```

## Файлы

- `code.js` - основная логика плагина с Grid layout и группировкой по свойствам
- `ui.html` - пользовательский интерфейс с настройками и выбором свойств
- `manifest.json` - конфигурация плагина
- `README.md` - документация с примерами использования 